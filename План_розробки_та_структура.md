# План розробки та структура проекту CalorieTracker

## 📁 Структура проекту

### Frontend (React + TypeScript)
```
calorietracker-frontend/
├── public/
│   ├── index.html
│   ├── favicon.ico
│   └── manifest.json
├── src/
│   ├── components/
│   │   ├── common/
│   │   │   ├── Header.tsx
│   │   │   ├── Sidebar.tsx
│   │   │   ├── Loading.tsx
│   │   │   └── ErrorBoundary.tsx
│   │   ├── auth/
│   │   │   ├── LoginForm.tsx
│   │   │   ├── RegisterForm.tsx
│   │   │   └── ProfileForm.tsx
│   │   ├── food/
│   │   │   ├── FoodSearch.tsx
│   │   │   ├── FoodCard.tsx
│   │   │   ├── BarcodeScanner.tsx
│   │   │   └── FoodDetails.tsx
│   │   ├── diary/
│   │   │   ├── DiaryEntry.tsx
│   │   │   ├── MealSection.tsx
│   │   │   ├── AddFoodModal.tsx
│   │   │   └── DiaryCalendar.tsx
│   │   └── analytics/
│   │       ├── CalorieChart.tsx
│   │       ├── MacroChart.tsx
│   │       ├── ProgressChart.tsx
│   │       └── StatisticsCard.tsx
│   ├── pages/
│   │   ├── Dashboard.tsx
│   │   ├── FoodSearch.tsx
│   │   ├── Diary.tsx
│   │   ├── Analytics.tsx
│   │   ├── Profile.tsx
│   │   ├── Login.tsx
│   │   └── Register.tsx
│   ├── graphql/
│   │   ├── queries/
│   │   │   ├── authQueries.ts
│   │   │   ├── foodQueries.ts
│   │   │   ├── diaryQueries.ts
│   │   │   └── analyticsQueries.ts
│   │   ├── mutations/
│   │   │   ├── authMutations.ts
│   │   │   ├── foodMutations.ts
│   │   │   ├── diaryMutations.ts
│   │   │   └── analyticsMutations.ts
│   │   └── fragments/
│   │       ├── foodFragments.ts
│   │       └── userFragments.ts
│   ├── services/
│   │   ├── api.ts
│   │   ├── authService.ts
│   │   ├── foodService.ts
│   │   ├── diaryService.ts
│   │   └── analyticsService.ts
│   ├── types/
│   │   ├── auth.ts
│   │   ├── food.ts
│   │   ├── diary.ts
│   │   └── analytics.ts
│   ├── utils/
│   │   ├── constants.ts
│   │   ├── helpers.ts
│   │   ├── validation.ts
│   │   └── formatters.ts
│   ├── hooks/
│   │   ├── useAuth.ts
│   │   ├── useFood.ts
│   │   └── useDiary.ts
│   ├── styles/
│   │   ├── global.css
│   │   ├── variables.css
│   │   └── components.css
│   ├── App.tsx
│   ├── index.tsx
│   └── routes.tsx
├── package.json
├── tsconfig.json
├── .env
└── README.md
```

### Backend (ASP.NET Core + GraphQL)
```
CalorieTracker.API/
├── GraphQL/
│   ├── Queries/
│   │   ├── AuthQuery.cs
│   │   ├── FoodQuery.cs
│   │   ├── DiaryQuery.cs
│   │   ├── AnalyticsQuery.cs
│   │   └── ProfileQuery.cs
│   ├── Mutations/
│   │   ├── AuthMutation.cs
│   │   ├── FoodMutation.cs
│   │   ├── DiaryMutation.cs
│   │   └── AnalyticsMutation.cs
│   └── Types/
│       ├── UserType.cs
│       ├── FoodType.cs
│       ├── DiaryEntryType.cs
│       └── AnalyticsType.cs
├── Models/
│   ├── Entities/
│   │   ├── User.cs
│   │   ├── FoodDiary.cs
│   │   ├── UserFood.cs
│   │   ├── Recipe.cs
│   │   └── UserGoal.cs
│   ├── DTOs/
│   │   ├── AuthDTOs.cs
│   │   ├── FoodDTOs.cs
│   │   ├── DiaryDTOs.cs
│   │   └── AnalyticsDTOs.cs
│   └── ViewModels/
│       ├── LoginViewModel.cs
│       ├── RegisterViewModel.cs
│       └── ProfileViewModel.cs
├── Services/
│   ├── Interfaces/
│   │   ├── IAuthService.cs
│   │   ├── IFoodService.cs
│   │   ├── IDiaryService.cs
│   │   └── IAnalyticsService.cs
│   ├── AuthService.cs
│   ├── FoodService.cs
│   ├── DiaryService.cs
│   ├── AnalyticsService.cs
│   └── FatSecretService.cs
├── Repositories/
│   ├── Interfaces/
│   │   ├── IUserRepository.cs
│   │   ├── IFoodRepository.cs
│   │   └── IDiaryRepository.cs
│   ├── UserRepository.cs
│   ├── FoodRepository.cs
│   └── DiaryRepository.cs
├── Data/
│   ├── ApplicationDbContext.cs
│   ├── Configurations/
│   │   ├── UserConfiguration.cs
│   │   ├── FoodDiaryConfiguration.cs
│   │   └── UserFoodConfiguration.cs
│   └── Migrations/
├── Middleware/
│   ├── JwtMiddleware.cs
│   ├── ErrorHandlingMiddleware.cs
│   └── RequestLoggingMiddleware.cs
├── Extensions/
│   ├── ServiceCollectionExtensions.cs
│   ├── ApplicationBuilderExtensions.cs
│   └── IdentityExtensions.cs
├── Helpers/
│   ├── JwtHelper.cs
│   ├── PasswordHelper.cs
│   └── ValidationHelper.cs
├── Program.cs
├── appsettings.json
└── CalorieTracker.API.csproj
```

## 🗓️ Детальний план розробки

### Тиждень 1: Налаштування проекту

#### День 1-2: Ініціалізація
- [ ] Створення GitHub репозиторію
- [ ] Налаштування Frontend проекту (Create React App + TypeScript)
- [ ] Налаштування Backend проекту (ASP.NET Core Web API)
- [ ] Налаштування бази даних (SQL Server)
- [ ] Конфігурація Git та .gitignore

#### День 3-4: Базова структура
- [ ] Створення базових компонентів (Header, Sidebar, Layout)
- [ ] Налаштування маршрутизації (React Router)
- [ ] Створення базових моделей та DbContext
- [ ] Налаштування Entity Framework
- [ ] Створення першої міграції

#### День 5-7: Інтеграція з FatSecret API
- [ ] Реєстрація в FatSecret Platform API
- [ ] Створення FatSecretService
- [ ] Реалізація базового пошуку продуктів
- [ ] Тестування API інтеграції
- [ ] Налаштування кешування

### Тиждень 2: Система аутентифікації

#### День 1-3: Backend аутентифікація
- [ ] Створення моделей User та AuthDTOs
- [ ] Реалізація AuthService з JWT
- [ ] Створення GraphQL AuthQuery та AuthMutation
- [ ] Налаштування HotChocolate та JWT middleware
- [ ] Тестування аутентифікації

#### День 4-5: Frontend аутентифікація
- [ ] Створення GraphQL queries та mutations для аутентифікації
- [ ] Реалізація LoginForm та RegisterForm
- [ ] Налаштування Apollo Client
- [ ] Налаштування захищених маршрутів
- [ ] Тестування форм

#### День 6-7: Профіль користувача
- [ ] Створення ProfileForm компонента
- [ ] Реалізація редагування профілю
- [ ] Розрахунок денної норми калорій
- [ ] Валідація даних профілю
- [ ] Тестування функціоналу

### Тиждень 3: Пошук та додавання продуктів

#### День 1-3: Пошук продуктів
- [ ] Створення FoodSearch компонента
- [ ] Реалізація автодоповнення
- [ ] Створення FoodCard компонента
- [ ] Реалізація фільтрації за категоріями
- [ ] Тестування пошуку

#### День 4-5: Сканування штрих-кодів
- [ ] Інтеграція бібліотеки для сканування
- [ ] Створення BarcodeScanner компонента
- [ ] Реалізація пошуку за штрих-кодом
- [ ] Обробка помилок сканування
- [ ] Тестування функціоналу

#### День 6-7: Улюблені продукти
- [ ] Створення системи улюблених продуктів
- [ ] Реалізація збереження/видалення улюблених
- [ ] Створення компонента для відображення улюблених
- [ ] Історія пошуку
- [ ] Тестування функціоналу

### Тиждень 4: Щоденник харчування

#### День 1-3: Базова структура щоденника
- [ ] Створення моделей FoodDiary
- [ ] Реалізація GraphQL DiaryQuery та DiaryMutation
- [ ] Створення DiaryEntry компонента
- [ ] Реалізація додавання продуктів до щоденника
- [ ] Тестування базового функціоналу

#### День 4-5: Прийоми їжі
- [ ] Створення MealSection компонента
- [ ] Реалізація розділення на прийоми їжі
- [ ] Створення AddFoodModal
- [ ] Реалізація редагування та видалення записів
- [ ] Тестування функціоналу

#### День 6-7: Календар та навігація
- [ ] Створення DiaryCalendar компонента
- [ ] Реалізація навігації по днях
- [ ] Відображення статистики по днях
- [ ] Швидкий доступ до нещодавніх продуктів
- [ ] Тестування функціоналу

### Тиждень 5: Аналітика та статистика

#### День 1-3: Базова статистика
- [ ] Створення GraphQL AnalyticsQuery
- [ ] Реалізація розрахунку денної статистики
- [ ] Створення StatisticsCard компонентів
- [ ] Відображення калорій та макронутрієнтів
- [ ] Тестування розрахунків

#### День 4-5: Графіки та візуалізація
- [ ] Інтеграція Chart.js
- [ ] Створення CalorieChart компонента
- [ ] Створення MacroChart компонента
- [ ] Реалізація тижневих/місячних графіків
- [ ] Тестування графіків

#### День 6-7: Прогрес та цілі
- [ ] Створення ProgressChart компонента
- [ ] Реалізація відстеження ваги
- [ ] Порівняння з цілями
- [ ] Рекомендації на основі прогресу
- [ ] Тестування функціоналу

### Тиждень 6: Додаткові функції

#### День 1-3: Рецепти
- [ ] Створення моделей Recipe
- [ ] Реалізація GraphQL RecipeQuery та RecipeMutation
- [ ] Створення компонентів для рецептів
- [ ] Розрахунок калорійності рецептів
- [ ] Тестування функціоналу

#### День 4-5: Нагадування
- [ ] Створення системи нагадувань
- [ ] Реалізація push-повідомлень
- [ ] Налаштування часу прийомів їжі
- [ ] Нагадування про пиття води
- [ ] Тестування функціоналу

#### День 6-7: Експорт даних
- [ ] Реалізація експорту в PDF
- [ ] Реалізація експорту в Excel
- [ ] Створення звітів
- [ ] Налаштування розсилки звітів
- [ ] Тестування експорту

### Тиждень 7: Оптимізація та тестування

#### День 1-3: Оптимізація
- [ ] Оптимізація запитів до БД
- [ ] Налаштування кешування
- [ ] Оптимізація зображень
- [ ] Покращення продуктивності
- [ ] Тестування продуктивності

#### День 4-5: Тестування
- [ ] Unit тести для Backend
- [ ] Unit тести для Frontend
- [ ] Integration тести
- [ ] E2E тести
- [ ] Тестування безпеки

#### День 6-7: Фіналізація
- [ ] Виправлення багів
- [ ] Покращення UX
- [ ] Документація коду
- [ ] Підготовка до деплою
- [ ] Фінальне тестування

## 🎯 Ключові мілістони

### Мілістон 1 (Тиждень 2): Базова аутентифікація
- ✅ Користувач може зареєструватися
- ✅ Користувач може увійти в систему
- ✅ Користувач може редагувати профіль

### Мілістон 2 (Тиждень 3): Пошук продуктів
- ✅ Користувач може шукати продукти
- ✅ Користувач може сканувати штрих-коди
- ✅ Користувач може зберігати улюблені продукти

### Мілістон 3 (Тиждень 4): Щоденник харчування
- ✅ Користувач може додавати продукти до щоденника
- ✅ Користувач може редагувати записи
- ✅ Користувач може переглядати історію

### Мілістон 4 (Тиждень 5): Аналітика
- ✅ Користувач може переглядати статистику
- ✅ Користувач може бачити графіки прогресу
- ✅ Система правильно підраховує калорії

### Мілістон 5 (Тиждень 7): Готовий продукт
- ✅ Всі функції працюють стабільно
- ✅ Додаток оптимізований
- ✅ Готовий до презентації

## 🔧 Технічні деталі

### GraphQL Schema
```graphql
type Query {
  # Auth
  me: User
  user(id: ID!): User
  
  # Food
  searchFood(query: String!): [Food!]!
  getFoodByBarcode(barcode: String!): Food
  getFavorites: [Food!]!
  
  # Diary
  getDiary(date: DateTime!): [DiaryEntry!]!
  getDiaryEntry(id: ID!): DiaryEntry
  
  # Analytics
  getDailyAnalytics(date: DateTime!): DailyAnalytics
  getWeeklyAnalytics(startDate: DateTime!): WeeklyAnalytics
  getMonthlyAnalytics(month: Int!, year: Int!): MonthlyAnalytics
  getProgress: Progress
}

type Mutation {
  # Auth
  register(input: RegisterInput!): AuthResult!
  login(input: LoginInput!): AuthResult!
  updateProfile(input: ProfileInput!): User!
  
  # Food
  addToFavorites(foodId: ID!): Boolean!
  removeFromFavorites(foodId: ID!): Boolean!
  
  # Diary
  addDiaryEntry(input: DiaryEntryInput!): DiaryEntry!
  updateDiaryEntry(id: ID!, input: DiaryEntryInput!): DiaryEntry!
  deleteDiaryEntry(id: ID!): Boolean!
}

type User {
  id: ID!
  email: String!
  name: String!
  age: Int
  gender: String
  weight: Float
  height: Float
  activityLevel: String
  goal: String
  dailyCalories: Int
}

type Food {
  id: ID!
  name: String!
  calories: Int!
  protein: Float
  fat: Float
  carbohydrates: Float
  barcode: String
}

type DiaryEntry {
  id: ID!
  date: DateTime!
  mealType: String!
  food: Food!
  quantity: Float!
  calories: Int!
}

type DailyAnalytics {
  date: DateTime!
  totalCalories: Int!
  totalProtein: Float!
  totalFat: Float!
  totalCarbohydrates: Float!
  goalProgress: Float!
}
```

### База даних схема
```sql
-- Користувачі
CREATE TABLE Users (
    Id INT PRIMARY KEY IDENTITY(1,1),
    Email NVARCHAR(255) UNIQUE NOT NULL,
    PasswordHash NVARCHAR(255) NOT NULL,
    Name NVARCHAR(100) NOT NULL,
    Age INT,
    Gender NVARCHAR(10),
    Weight DECIMAL(5,2),
    Height DECIMAL(5,2),
    ActivityLevel NVARCHAR(20),
    Goal NVARCHAR(20),
    DailyCalories INT,
    CreatedAt DATETIME2 DEFAULT GETDATE(),
    UpdatedAt DATETIME2 DEFAULT GETDATE()
);

-- Щоденник харчування
CREATE TABLE FoodDiary (
    Id INT PRIMARY KEY IDENTITY(1,1),
    UserId INT FOREIGN KEY REFERENCES Users(Id),
    Date DATE NOT NULL,
    MealType NVARCHAR(20) NOT NULL,
    FoodId NVARCHAR(50) NOT NULL,
    FoodName NVARCHAR(255) NOT NULL,
    Quantity DECIMAL(8,2) NOT NULL,
    Calories INT NOT NULL,
    Protein DECIMAL(8,2),
    Fat DECIMAL(8,2),
    Carbohydrates DECIMAL(8,2),
    CreatedAt DATETIME2 DEFAULT GETDATE()
);

-- Улюблені продукти
CREATE TABLE UserFoods (
    Id INT PRIMARY KEY IDENTITY(1,1),
    UserId INT FOREIGN KEY REFERENCES Users(Id),
    FoodId NVARCHAR(50) NOT NULL,
    FoodName NVARCHAR(255) NOT NULL,
    IsFavorite BIT DEFAULT 1,
    LastUsed DATETIME2 DEFAULT GETDATE(),
    CreatedAt DATETIME2 DEFAULT GETDATE()
);

-- Цілі користувача
CREATE TABLE UserGoals (
    Id INT PRIMARY KEY IDENTITY(1,1),
    UserId INT FOREIGN KEY REFERENCES Users(Id),
    TargetWeight DECIMAL(5,2),
    StartDate DATE NOT NULL,
    EndDate DATE,
    IsActive BIT DEFAULT 1,
    CreatedAt DATETIME2 DEFAULT GETDATE()
);
```

## 📊 Метрики успіху

### Технічні метрики
- **Час завантаження сторінки**: < 2 секунди
- **Час відповіді API**: < 500ms
- **Покриття тестами**: > 80%
- **Кількість багів**: < 5 критичних

### Функціональні метрики
- **Успішна реєстрація**: 100%
- **Успішний пошук продуктів**: > 95%
- **Точність підрахунку калорій**: > 99%
- **Стабільність роботи**: > 99.5%

### Користувацькі метрики
- **Час додавання продукту**: < 30 секунд
- **Кількість кліків для додавання**: < 3
- **Зручність інтерфейсу**: > 4.5/5
- **Швидкість навігації**: > 4.5/5

---

*Цей план є гнучким і може бути адаптований під реальні потреби команди та часові обмеження.*
